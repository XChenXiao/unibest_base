<!-- Generated by SpecStory -->

# æ£€æŸ¥å¹¶è¿˜åŸtabbarèƒŒæ™¯æ ·å¼ (2025-05-24 15:07:49)

_**User**_

å¸®æˆ‘æ£€æŸ¥å„ä¸ªtabbaré¡µé¢çš„è“è‰²èƒŒæ™¯æ ·å¼æ˜¯ä¸æ˜¯å…¨å±€æ ·å¼å¯¼è‡´çš„ï¼Œå¸®æˆ‘è¿˜åŸæˆä¸Šä¸€ä¸ªgitç‰ˆæœ¬æäº¤çš„æ ·å¼

---

_**Assistant**_



---

æˆ‘æ¥å¸®æ‚¨æ£€æŸ¥tabbaré¡µé¢çš„è“è‰²èƒŒæ™¯æ ·å¼é—®é¢˜ï¼Œå¹¶è¿˜åŸåˆ°ä¸Šä¸€ä¸ªgitç‰ˆæœ¬çš„æ ·å¼ã€‚

é¦–å…ˆè®©æˆ‘æŸ¥çœ‹é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ°tabbaré¡µé¢å’Œå…¨å±€æ ·å¼æ–‡ä»¶ï¼š

---

<details>
            <summary>Listed current directory â€¢ **42** results</summary>
        
| Name |
|-------|
| ğŸ“ `docs` |
| ğŸ“ `.git` |
| ğŸ“„ `.eslintrc-auto-import.json` |
| ğŸ“„ `manifest.config.ts` |
| ğŸ“ `src` |
| ğŸ“ `env` |
| ğŸ“ `uniCloud-aliyun` |
| ğŸ“ `unpackage` |
| ğŸ“„ `pnpm-lock.yaml` |
| ğŸ“„ `package.json` |
| ğŸ“„ `pages.config.ts` |
| ğŸ“„ `index.html` |
| ğŸ“„ `boceasy.ico` |
| ğŸ“„ `build-success.log` |
| ğŸ“„ `build-error.log` |
| ğŸ“„ `.cursorignore` |
| ğŸ“ `dist` |
| ğŸ“ `node_modules` |
| ğŸ“„ `openapi-ts-request.config.ts` |
| ğŸ“„ `.gitignore` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“ `.specstory` |
| ğŸ“„ `vite.config.ts` |
| ğŸ“„ `README.md` |
| ğŸ“„ `tsconfig.json` |
| ğŸ“„ `uno.config.ts` |
| ğŸ“ `vite-plugins` |
| ğŸ“ `scripts` |
| ğŸ“ `screenshots` |
| ğŸ“„ `.npmrc` |
| ğŸ“„ `.prettierignore` |
| ğŸ“„ `.prettierrc.cjs` |
| ğŸ“„ `.stylelintignore` |
| ğŸ“„ `.stylelintrc.cjs` |
| ğŸ“ `.vscode` |
| ğŸ“„ `LICENSE` |
| ğŸ“„ `.commitlintrc.cjs` |
| ğŸ“ `.cursor` |
| ğŸ“„ `.editorconfig` |
| ğŸ“„ `.eslintignore` |
| ğŸ“„ `.eslintrc.cjs` |
| ğŸ“ `.github` |

</details>

---

<details>
            <summary>Listed directory src â€¢ **24** results</summary>
        
| Name |
|-------|
| ğŸ“„ `pages.json` |
| ğŸ“„ `manifest.json` |
| ğŸ“„ `App.vue` |
| ğŸ“ `store` |
| ğŸ“ `utils` |
| ğŸ“ `uni_modules` |
| ğŸ“ `types` |
| ğŸ“ `interceptors` |
| ğŸ“ `document` |
| ğŸ“ `components` |
| ğŸ“ `pages` |
| ğŸ“ `static` |
| ğŸ“ `service` |
| ğŸ“ `config` |
| ğŸ“„ `typings.d.ts` |
| ğŸ“ `mock` |
| ğŸ“„ `env.d.ts` |
| ğŸ“ `hooks` |
| ğŸ“„ `typings.ts` |
| ğŸ“„ `uni.scss` |
| ğŸ“ `style` |
| ğŸ“ `layouts` |
| ğŸ“„ `main.ts` |
| ğŸ“ `pages-sub` |

</details>

---

Read file: src/pages.json

---

Read file: src/pages.json

---

ç°åœ¨æˆ‘æ‰¾åˆ°äº†tabbaré¡µé¢ã€‚ä»pages.jsonå¯ä»¥çœ‹åˆ°æœ‰4ä¸ªtabbaré¡µé¢ï¼š
1. pages/index/index (é¦–é¡µ)
2. pages/trading/index (äº¤æ˜“)
3. pages/assets/index (èµ„äº§)
4. pages/my/index (æˆ‘çš„)

è®©æˆ‘æŸ¥çœ‹å…¨å±€æ ·å¼æ–‡ä»¶ï¼š

---

Read file: src/App.vue

---

Read file: src/App.vue

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹å…¨å±€æ ·å¼æ–‡ä»¶uni.scssï¼š

---

Read file: src/uni.scss

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹styleç›®å½•ä¸‹çš„æ ·å¼æ–‡ä»¶ï¼š

---

<details>
            <summary>Listed directory src/style â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `iconfont.css` |
| ğŸ“„ `index.scss` |

</details>

---

Read file: src/style/index.scss

---

ç°åœ¨è®©æˆ‘æ£€æŸ¥å„ä¸ªtabbaré¡µé¢çš„æ ·å¼ï¼Œå…ˆæŸ¥çœ‹å½“å‰çš„èƒŒæ™¯æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚è®©æˆ‘æŸ¥çœ‹gitå†å²ï¼Œçœ‹çœ‹ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æ ·å¼ï¼š

---

```bash
cd /home/xchenxiao/Development/trade_main/unibest_base && git log --oneline -10
```

```
8ada56e (HEAD -> fiance, origin/fiance) ç‰ˆæœ¬
730a4fd å®åå¼¹çª—é—®é¢˜
7bb64cc è§£å†³æ‰‹ç»­è´¹è®¡ç®—é—®é¢˜
4699812 ä¼˜åŒ–æ˜¾ç¤º
cfed80c äº¤æ˜“è¯¦æƒ…ä¸­è·å–æ•°æ®
d468e43 è§£å†³äº¤æ˜“æ‰€äº¤æ˜“è®¢å•æ•°æ®è·å–é—®é¢˜
5c52298 äº¤æ˜“æ‰€æ˜¾ç¤ºé—®é¢˜
81eff02 ä¼˜åŒ–èµ„äº§é¡µé¢
f6e6804 ä¼˜åŒ–è´§å¸æ•°æ®ç®¡ç†ï¼Œæ–°å¢è´§å¸storeï¼Œæ›´æ–°ç›¸å…³é¡µé¢ä»¥ä½¿ç”¨storeè·å–ç”¨æˆ·è´§å¸ä¿¡æ¯ï¼Œæå‡æ•°æ®è·å–
æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒ
        fb32dff è§£å†³é¦–é¡µå…¬å‘Šé‡å¤è¯·æ±‚çš„é—®é¢˜

```

---

```bash
git show 730a4fd:src/App.vue
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git show 730a4fd:src/App.vue
<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'
import { onLaunch, onShow, onHide } from '@dcloudio/uni-app'
import 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'
import { useUserStore, useUserManagerStore, useCurrencyStore, useDepositTipsStore } from '@/sto
re'
import { useAppStore } from '@/store/app'
import { usePlatformStore } from '@/store/platform'
import { getNeedLoginPages, clearPageCache } from '@/utils'
import { pages } from '@/pages.json'
import { tabbarStore } from '@/components/fg-tabbar/tabbar'
import { API_URL } from '@/config/api'

// åˆå§‹åŒ–ç”¨æˆ·çŠ¶æ€
const userStore = useUserStore()
// ç”¨æˆ·ç®¡ç†å™¨
const userManagerStore = useUserManagerStore()
// åˆå§‹åŒ–åº”ç”¨çŠ¶æ€
const appStore = useAppStore()
// åˆå§‹åŒ–å¹³å°è®¾ç½®çŠ¶æ€
const platformStore = usePlatformStore()
// åˆå§‹åŒ–è´§å¸æ•°æ®store
const currencyStore = useCurrencyStore()
// åˆå§‹åŒ–é¢„å­˜é‡‘é¢æç¤ºstore
const depositTipsStore = useDepositTipsStore()

// æœ€å°æ›´æ–°æ—¶é—´é—´éš”(æ¯«ç§’)ï¼š5åˆ†é’Ÿ
const MIN_UPDATE_INTERVAL = 5 * 60 * 1000

// ç§»é™¤å…¬å‘Šå¼¹çª—çŠ¶æ€
// const showAnnouncementPopup = ref(false)
const appOpenCount = ref(0)
// æ·»åŠ ä¸€ä¸ªæ ‡å¿—ä½ï¼Œé˜²æ­¢å¤šæ¬¡é‡å®šå‘
const isRedirecting = ref(false)

// å®šä¹‰ç™½åå•è·¯å¾„ - è¿™äº›é¡µé¢ä¸éœ€è¦ç™»å½•
const noLoginPaths = [
  '/pages/login/index',
  '/pages/register/index',
  '/pages/register/captcha',
  '/pages/login/password',
  '/pages/login/reset-password',
  '/pages/index/index',
]

// ä¿å­˜ç™½åå•åˆ°æœ¬åœ°ç¼“å­˜
const saveNoLoginPathsToStorage = () => {
  uni.setStorageSync('no_login_paths', JSON.stringify(noLoginPaths))
}

// ä»æœ¬åœ°ç¼“å­˜è·å–ç™½åå•
const getNoLoginPathsFromStorage = () => {
  const paths = uni.getStorageSync('no_login_paths')
  return paths ? JSON.parse(paths) : noLoginPaths
}

// æ£€æŸ¥é¡µé¢æ˜¯å¦åœ¨ç™½åå•ä¸­
const isInNoLoginPaths = (path: string) => {
  const paths = getNoLoginPathsFromStorage()
  return paths.some((noLoginPath: string) => path.startsWith(noLoginPath))
}

// ä¿å­˜å½“å‰é¡µé¢è·¯å¾„åˆ°ç¼“å­˜
const saveCurrentPageToStorage = () => {
  const pages = getCurrentPages()
  if (pages.length > 0) {
    const currentPage = pages[pages.length - 1]
    const currentPath = '/' + currentPage.route
    console.log('ä¿å­˜å½“å‰é¡µé¢è·¯å¾„åˆ°ç¼“å­˜:', currentPath)
    uni.setStorageSync('last_page_path', currentPath)
  }
}

// ä»ç¼“å­˜è·å–ä¸Šæ¬¡çš„é¡µé¢è·¯å¾„
const getLastPageFromStorage = () => {
  return uni.getStorageSync('last_page_path') || ''
}

onLaunch(async () => {
  // åº”ç”¨å¯åŠ¨æ—¶ï¼Œæ— è®ºå¦‚ä½•éƒ½é‡ç½®ç™»å½•é‡å®šå‘æ ‡å¿—ä½
  // è¿™æ ·å³ä½¿ä¸Šæ¬¡åº”ç”¨å¼‚å¸¸é€€å‡ºï¼Œä¹Ÿèƒ½ç¡®ä¿æœ¬æ¬¡å¯åŠ¨æ­£å¸¸è·³è½¬åˆ°ç™»å½•é¡µ
  uni.setStorageSync('redirecting_to_login', 'false')

  // ä¿å­˜ç™½åå•åˆ°æœ¬åœ°ç¼“å­˜
  saveNoLoginPathsToStorage()

  // åˆå§‹åŒ–tabbarï¼Œè®¾ç½®é¦–é¡µç´¢å¼•ä¸º0
  tabbarStore.initTabbar()

  // æ£€æŸ¥æ˜¯å¦æœ‰token (é€šè¿‡piniaæŒä¹…åŒ–å­˜å‚¨)
  if (userStore.isLogined) {
    console.log('æ£€æµ‹åˆ°ç”¨æˆ·tokenï¼Œè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯')
    try {
      // è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ - åªè·å–ç”¨æˆ·ä¿¡æ¯å’Œè®¤è¯çŠ¶æ€ï¼Œä¸è¯·æ±‚é“¶è¡Œå¡å’Œå›¢é˜Ÿä¿¡æ¯
      await userStore.fetchUserInfo()

      // è·å–ç”¨æˆ·è´§å¸æ•°æ®
      console.log('å¼€å§‹è·å–ç”¨æˆ·æŒæœ‰è´§å¸æ•°æ®')
      currencyStore
        .fetchUserCurrencies(true)
        .then(() => {
          console.log('åˆå§‹åŒ–ç”¨æˆ·è´§å¸æ•°æ®æˆåŠŸ')
        })
        .catch((error) => {
          console.error('åˆå§‹åŒ–ç”¨æˆ·è´§å¸æ•°æ®å¤±è´¥:', error)
        })

      // ç™»å½•æœ‰æ•ˆï¼Œè·å–å¹³å°åŠŸèƒ½å¼€å…³è®¾ç½®
      await platformStore.fetchPlatformSettings()
      // è·å–é“¶è¡Œå¡å¼€æˆ·é¢„å­˜é‡‘
      appStore.fetchBankCardOpenFee()

      // è·å–é¢„å­˜é‡‘é¢æç¤ºï¼ˆåœ¨åå°è¿›è¡Œï¼Œä¸é˜»å¡åº”ç”¨å¯åŠ¨ï¼‰
      depositTipsStore.fetchDepositTips().catch((error) => {
        console.error('åˆå§‹åŒ–é¢„å­˜é‡‘é¢æç¤ºå¤±è´¥:', error)
      })

      // å…³é—­å¯åŠ¨å°é¢
      closeSplashscreen()
    } catch (error) {
      console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥', error)
      // å‡ºé”™æ—¶æ¸…é™¤token
      userManagerStore.clearAllUserData()
      // è·³è½¬åˆ°ç™»å½•é¡µ
      navigateToLogin()
      // å…³é—­å¯åŠ¨å°é¢
      closeSplashscreen()
    }
  } else {
    console.log('ç”¨æˆ·æœªç™»å½•ï¼Œæ£€æŸ¥ç¼“å­˜çš„é¡µé¢è·¯å¾„')

    // è·å–å½“å‰é¡µé¢è·¯å¾„
    const pages = getCurrentPages()
    if (pages.length > 0) {
      const currentPage = pages[pages.length - 1]
      const currentPath = '/' + currentPage.route

      // æ£€æŸ¥å½“å‰é¡µé¢æ˜¯å¦åœ¨ç™½åå•ä¸­
      if (isInNoLoginPaths(currentPath)) {
        console.log('å½“å‰é¡µé¢åœ¨ç™½åå•ä¸­ï¼Œæ— éœ€è·³è½¬åˆ°ç™»å½•é¡µ')
        return
      }
    }

    // ä¸åœ¨ç™½åå•ä¸­ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
    console.log('ç”¨æˆ·æœªç™»å½•ä¸”ä¸åœ¨ç™½åå•ä¸­ï¼Œç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µ')
    setTimeout(() => {
      navigateToLogin()
    }, 500)
  }
})

// å…³é—­å¯åŠ¨å°é¢
const closeSplashscreen = () => {
  // #ifdef APP-PLUS
  // ç«‹å³å°è¯•å…³é—­ä¸€æ¬¡
  try {
    console.log('ç«‹å³å°è¯•å…³é—­å¯åŠ¨å°é¢')
    plus.navigator.closeSplashscreen()
  } catch (e) {
    console.error('ç›´æ¥å…³é—­å¯åŠ¨å°é¢å¤±è´¥', e)
  }

  // å»¶è¿Ÿåå†æ¬¡å°è¯•å…³é—­ï¼Œç¡®ä¿ä¸€å®šèƒ½å…³é—­
  setTimeout(() => {
    try {
      // æ‰‹åŠ¨å…³é—­Appå¯åŠ¨å°é¢
      plus.navigator.closeSplashscreen()
      console.log('å»¶è¿Ÿå…³é—­å¯åŠ¨å°é¢æˆåŠŸ')
    } catch (e) {
      console.error('å»¶è¿Ÿå…³é—­å¯åŠ¨å°é¢å¤±è´¥', e)
    }
  }, 1000)
  // #endif
}

// å¯¼èˆªåˆ°ç™»å½•é¡µé¢
const navigateToLogin = () => {
  // å…ˆç¡®ä¿é‡å®šå‘æ ‡å¿—ä½ä¸ºfalse
  // è¿™æ ·å¯ä»¥é˜²æ­¢å‰ä¸€æ¬¡å¼‚å¸¸å¯¼è‡´æ ‡å¿—ä½ä¸ºtrueè€Œè·³è¿‡è·³è½¬
  uni.setStorageSync('redirecting_to_login', 'false')

  // æ£€æŸ¥æ˜¯å¦æ­£åœ¨é‡å®šå‘åˆ°ç™»å½•é¡µé¢
  if (uni.getStorageSync('redirecting_to_login') === 'true') {
    console.log('å·²æœ‰é‡å®šå‘åˆ°ç™»å½•é¡µé¢çš„è¿‡ç¨‹ï¼Œè·³è¿‡é‡å¤è·³è½¬')
    return
  }

  // å¦‚æœå·²ç»åœ¨é‡å®šå‘ä¸­ï¼Œåˆ™ä¸å†æ‰§è¡Œ
  if (isRedirecting.value) {
    console.log('å·²ç»åœ¨é‡å®šå‘è¿‡ç¨‹ä¸­ï¼Œè·³è¿‡é‡å¤è·³è½¬')
    return
  }

  // è·å–å½“å‰é¡µé¢è·¯å¾„ä½œä¸ºé‡å®šå‘ç›®æ ‡
  const pages = getCurrentPages()
  // å¦‚æœå½“å‰å·²ç»åœ¨ç™»å½•é¡µï¼Œä¸éœ€è¦å†æ¬¡è·³è½¬
  if (pages.length > 0) {
    const currentPage = pages[pages.length - 1]
    const currentPath = '/' + currentPage.route

    if (currentPath.includes('/pages/login/')) {
      console.log('å½“å‰å·²åœ¨ç™»å½•é¡µé¢ï¼Œæ— éœ€é‡å®šå‘')
      return
    }
  }

  console.log('å¯¼èˆªåˆ°ç™»å½•é¡µ')

  // è®¾ç½®é‡å®šå‘æ ‡å¿—
  isRedirecting.value = true
  // è®¾ç½®æœ¬åœ°å­˜å‚¨æ ‡å¿—
  uni.setStorageSync('redirecting_to_login', 'true')

  // é‡å®šå‘åˆ°å¯†ç ç™»å½•é¡µ
  uni.reLaunch({
    url: '/pages/login/password',
    success: () => {
      // æˆåŠŸè·³è½¬åç«‹å³å…³é—­å¯åŠ¨å°é¢
      console.log('æˆåŠŸè·³è½¬åˆ°ç™»å½•é¡µï¼Œç«‹å³å…³é—­å¯åŠ¨å°é¢')
      closeSplashscreen()
    },
    complete: () => {
      // å®Œæˆåé‡ç½®æ ‡å¿—
      setTimeout(() => {
        isRedirecting.value = false
        // ä¸é‡ç½®æœ¬åœ°å­˜å‚¨æ ‡å¿—ï¼Œè®©ç™»å½•é¡µé¢æ¥é‡ç½®
      }, 2000)
    },
  })
}

// ç§»é™¤å…¬å‘Šæ£€æŸ¥æ–¹æ³•
// const checkAndShowAnnouncement = async () => {
//   try {
//     console.log('åº”ç”¨æ£€æŸ¥æœ€æ–°å…¬å‘Š')
//
//     // æ£€æŸ¥å½“å‰é¡µé¢æ˜¯å¦åœ¨ç™½åå•ä¸­ï¼Œå¦‚æœåœ¨ç™½åå•ä¸­ä¸”ä¸æ˜¯é¦–é¡µï¼Œåˆ™ä¸æ˜¾ç¤ºå…¬å‘Š
//     const pages = getCurrentPages()
//     if (pages.length > 0) {
//       const currentPage = pages[pages.length - 1]
//       const currentPath = '/' + currentPage.route
//
//       // ç‰¹åˆ«æ’é™¤æ³¨å†Œå’Œç™»å½•ç›¸å…³é¡µé¢æ˜¾ç¤ºå…¬å‘Š
//       if (currentPath.includes('/pages/register/') ||
//           (currentPath.includes('/pages/login/') && !currentPath.includes('/pages/login/inde
x'))) {
//         console.log('å½“å‰åœ¨æ³¨å†Œ/ç™»å½•æµç¨‹ä¸­ï¼Œæš‚ä¸æ˜¾ç¤ºå…¬å‘Š:', currentPath)
//         return
//       }
//     }
//
//     // å¯¼å…¥å…¬å‘ŠæœåŠ¡API
//     const { getLatestAnnouncementAPI } = await import('@/service/index/message')
//
//     try {
//       // è·å–æœ€æ–°å…¬å‘Š
//       const result = await getLatestAnnouncementAPI()
//
//       // å¦‚æœæœ‰å…¬å‘Šï¼Œåˆ™æ˜¾ç¤ºå¼¹çª—
//       if (result.status === 'success' && result.data) {
//         // æ£€æŸ¥æ­¤å…¬å‘Šæ˜¯å¦å·²ç»å±•ç¤ºè¿‡
//         const shownAnnouncements = uni.getStorageSync('shown_announcements') || []
//         const hasShown = shownAnnouncements.includes(result.data.id)
//
//         // å¦‚æœæ²¡æœ‰å±•ç¤ºè¿‡ï¼Œåˆ™æ˜¾ç¤ºå¼¹çª—
//         if (!hasShown) {
//           console.log('æ˜¾ç¤ºæœ€æ–°å…¬å‘Šå¼¹çª—')
//           // å»¶è¿Ÿæ˜¾ç¤ºï¼Œç¡®ä¿åº”ç”¨å·²å®Œå…¨åŠ è½½
//           setTimeout(() => {
//             showAnnouncementPopup.value = true
//           }, 800)
//         } else {
//           console.log('æ­¤å…¬å‘Šå·²ç»å±•ç¤ºè¿‡ï¼Œä¸å†æ˜¾ç¤º')
//         }
//       } else {
//         console.log('æ²¡æœ‰å…¬å‘Šå¯æ˜¾ç¤º')
//       }
//     } catch (error) {
//       console.error('è·å–å…¬å‘Šå¤±è´¥:', error)
//     }
//   } catch (error) {
//     console.error('æ£€æŸ¥å…¬å‘Šå¤±è´¥:', error)
//   }
// }

// ç§»é™¤å¤„ç†å…¬å‘Šå¼¹çª—å…³é—­äº‹ä»¶çš„æ–¹æ³•
// const handleAnnouncementClose = (data: { dontShowAgain: boolean }) => {
//   console.log('å…¬å‘Šå¼¹çª—å…³é—­:', data)
// }

onShow(() => {
  console.log('App onShow')
  // ç§»é™¤è‡ªåŠ¨åˆ·æ–°ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘ï¼Œåªåœ¨é¦–é¡µåˆ·æ–°

  // ä¸å†åœ¨æ¯æ¬¡åº”ç”¨æ˜¾ç¤ºæ—¶åˆ·æ–°å¹³å°åŠŸèƒ½å¼€å…³è®¾ç½®
  console.log('åº”ç”¨æ˜¾ç¤ºï¼Œä¸å†é‡å¤è¯·æ±‚å¹³å°åŠŸèƒ½å¼€å…³è®¾ç½®')
  // platformStore.fetchPlatformSettings() // ç§»é™¤æ­¤å¤„è°ƒç”¨ï¼Œä»…åœ¨é¦–æ¬¡å¯åŠ¨æ—¶è¯·æ±‚

  // æ³¨æ„ï¼šä¸å†åœ¨onShowä¸­è§¦å‘ç™»å½•è·³è½¬é€»è¾‘
  // ä»…åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨åº”ç”¨æ—¶(onLaunch)æ£€æŸ¥ç™»å½•çŠ¶æ€
  console.log('åº”ç”¨æ˜¾ç¤ºï¼Œä¸å†æ£€æŸ¥ç™»å½•çŠ¶æ€ä»¥é¿å…æ„å¤–è·³è½¬')
})

onHide(() => {
  console.log('App Hide - åº”ç”¨è¿›å…¥åå°')
  // åº”ç”¨é€€å‡ºåˆ°åå°æ—¶ï¼Œä¿å­˜å½“å‰é¡µé¢è·¯å¾„
  saveCurrentPageToStorage()

  // åº”ç”¨é€€å‡ºåˆ°åå°æ—¶ï¼Œé‡ç½®ç™»å½•é‡å®šå‘æ ‡å¿—ä½
  // è¿™æ ·å½“ç”¨æˆ·å†æ¬¡è¿›å…¥æ—¶å¯ä»¥æ­£å¸¸è§¦å‘ç™»å½•è·³è½¬
  uni.setStorageSync('redirecting_to_login', 'false')
  console.log('åº”ç”¨é€€å‡ºåˆ°åå°ï¼Œé‡ç½®ç™»å½•é‡å®šå‘æ ‡å¿—ä½')

  // æ¸…ç©ºé¡µé¢ç¼“å­˜
  clearPageCache()
})

// UniAppä¸æ”¯æŒç›´æ¥ä½¿ç”¨window.addEventListener
// æ”¹ä¸ºä½¿ç”¨uni.onErroræ•è·åº”ç”¨é”™è¯¯ï¼ŒåŒæ—¶ä¿å­˜é¡µé¢çŠ¶æ€
uni.onError((err) => {
  console.error('åº”ç”¨å‘ç”Ÿé”™è¯¯ï¼Œä¿å­˜å½“å‰é¡µé¢çŠ¶æ€:', err)
  saveCurrentPageToStorage()
})

// åœ¨é¡µé¢ä¸Šæ³¨å†Œunloadäº‹ä»¶ï¼ˆä»…H5ç¯å¢ƒæœ‰æ•ˆï¼‰
// #ifdef H5
onMounted(() => {
  window.addEventListener('beforeunload', () => {
    saveCurrentPageToStorage()
    console.log('é¡µé¢å³å°†åˆ·æ–°ï¼Œä¿å­˜å½“å‰é¡µé¢è·¯å¾„')
  })
})

onUnmounted(() => {
  window.removeEventListener('beforeunload', () => {
    saveCurrentPageToStorage()
  })
})
// #endif
</script>

<template>
  <!-- ç§»é™¤å…¨å±€å…¬å‘Šå¼¹çª— -->
  <!-- <AnnouncementPopup v-model="showAnnouncementPopup" @close="handleAnnouncementClose" /> -
->
  <view></view>
</template>

<style lang="scss">
/* stylelint-disable selector-type-no-unknown */
button::after {
  border: none;
}

swiper,
scroll-view {
  flex: 1;
  height: 100%;
  overflow: hidden;
}

image {
  width: 100%;
  height: 100%;
  vertical-align: middle;
}

// å•è¡Œçœç•¥ï¼Œä¼˜å…ˆä½¿ç”¨ unocss: text-ellipsis
.ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// ä¸¤è¡Œçœç•¥
.ellipsis-2 {
  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

// ä¸‰è¡Œçœç•¥
.ellipsis-3 {
  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
}
/* å…¨å±€å¼¹çª—æ ·å¼è¦†ç›– */
.wd-popup {
  z-index: 9999 !important;
}

.wd-popup__content {
  z-index: 9999 !important;
}
</style>
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$
```

---

çœ‹èµ·æ¥App.vueæ–‡ä»¶æ²¡æœ‰å·®å¼‚ã€‚è®©æˆ‘æŸ¥çœ‹é¡µé¢çš„globalStyleèƒŒæ™¯é¢œè‰²è®¾ç½®ï¼Œå¹¶æ£€æŸ¥pages.jsonï¼š

---

```bash
git show 730a4fd:src/pages.json | head -20
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git show 730a4fd:src/pages.json | h
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git show 730a4fd:src/pages.json | h
ead -20
{
  "globalStyle": {
    "navigationStyle": "default",
    "navigationBarTitleText": "unibest",
    "navigationBarBackgroundColor": "#f8f8f8",
    "navigationBarTextStyle": "black",
    "backgroundColor": "#FFFFFF"
  },
  "easycom": {
    "autoscan": true,
    "custom": {
      "^wd-(.*)": "wot-design-uni/components/wd-$1/wd-$1.vue",
      "^(?!z-paging-refresh|z-paging-load-more)z-paging(.*)": "z-paging/components/z-paging$1/z
-paging$1.vue"
    }
  },
  "tabBar": {
    "custom": true,
    "color": "#999999",
    "selectedColor": "#018d71",
    "backgroundColor": "#F8F8F8",
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$
```

---

çœ‹èµ·æ¥pages.jsonçš„å…¨å±€èƒŒæ™¯è®¾ç½®ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚è®©æˆ‘æ£€æŸ¥å…·ä½“çš„tabbaré¡µé¢æ˜¯å¦æœ‰è“è‰²èƒŒæ™¯é—®é¢˜ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹å…¶ä¸­ä¸€ä¸ªtabbaré¡µé¢ï¼š

---

<details>
            <summary>Listed directory src/pages â€¢ **11** results</summary>
        
| Name |
|-------|
| ğŸ“ `assets` |
| ğŸ“ `register` |
| ğŸ“ `my` |
| ğŸ“ `login` |
| ğŸ“ `index` |
| ğŸ“ `transfer` |
| ğŸ“ `team` |
| ğŸ“ `trading` |
| ğŸ“ `verification` |
| ğŸ“ `currency-records` |
| ğŸ“ `equity-records` |

</details>

---

Read file: src/pages/index/index.vue

---

<details>
            <summary>Grep search for "background.*color|background.*#|bg.*color" â€¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L465 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L476 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L485 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L490 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L465 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L476 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L485 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L490 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |

</details>

---

è®©æˆ‘æŸ¥çœ‹é¦–é¡µçš„æ ·å¼éƒ¨åˆ†ï¼š

---

Read file: src/pages/index/index.vue

---

æˆ‘å‘ç°äº†é—®é¢˜ï¼åœ¨é¦–é¡µçš„æ ·å¼ä¸­ï¼Œæœ€åæœ‰ä¸€ä¸ªæ ¼å¼é”™è¯¯çš„CSSæ ·å¼å¯¼è‡´äº†é—®é¢˜ã€‚è®©æˆ‘æ£€æŸ¥å…¶ä»–tabbaré¡µé¢æ˜¯å¦ä¹Ÿæœ‰ç±»ä¼¼é—®é¢˜ï¼š

---

Read file: src/pages/trading/index.vue

---

<details>
            <summary>Grep search for "background.*color|background.*#|bg.*color" â€¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/trading/index.vue` | L291 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/trading/index.vue` | L311 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/trading/index.vue` | L346 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |

</details>

---

Read file: src/pages/trading/index.vue

---

ç°åœ¨è®©æˆ‘æ£€æŸ¥å…¶ä»–tabbaré¡µé¢ï¼š

---

<details>
            <summary>Grep search for "background.*color|background.*#|bg.*color" â€¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L908 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L928 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L948 | `background-color: white;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L978 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L983 | `background-color: white;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L908 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L928 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L948 | `background-color: white;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L978 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/assets/index.vue` | L983 | `background-color: white;` |

</details>

---

<details>
            <summary>Grep search for "background.*color|background.*#|bg.*color" â€¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L705 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L722 | `background: linear-gradient(to right, #ff9c00, #fa2c19);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L732 | `background: linear-gradient(to bottom, #3498db, rgba(250, 44, 25, 0.2), rgba(255, 255, 255, 0));` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L754 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L803 | `background: linear-gradient(to bottom right, #35c8e6, #17b8e0);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L836 | `background-color: rgba(255, 255, 255, 0.3);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L896 | `background-color: #ffffff;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L902 | `background-color: rgba(255, 255, 255, 0.3);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L923 | `background-color: white;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L942 | `background-color: #f0f0f0;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L956 | `background-color: rgba(52, 152, 219, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L960 | `background-color: rgba(243, 156, 18, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L964 | `background-color: rgba(46, 204, 113, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L968 | `background-color: rgba(155, 89, 182, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L972 | `background-color: rgba(231, 76, 60, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L976 | `background-color: rgba(52, 73, 94, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L980 | `background-color: rgba(26, 188, 156, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1049 | `background: #ffffff;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1066 | `background: linear-gradient(45deg, #e67e22, #d35400);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1076 | `background-color: #ffffff;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1150 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1157 | `background-color: rgba(243, 156, 18, 0.2);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1163 | `background-color: rgba(243, 156, 18, 0.1);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1205 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L705 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L722 | `background: linear-gradient(to right, #ff9c00, #fa2c19);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L732 | `background: linear-gradient(to bottom, #3498db, rgba(250, 44, 25, 0.2), rgba(255, 255, 255, 0));` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L754 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L803 | `background: linear-gradient(to bottom right, #35c8e6, #17b8e0);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L836 | `background-color: rgba(255, 255, 255, 0.3);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L896 | `background-color: #ffffff;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L902 | `background-color: rgba(255, 255, 255, 0.3);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L923 | `background-color: white;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L942 | `background-color: #f0f0f0;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L956 | `background-color: rgba(52, 152, 219, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L960 | `background-color: rgba(243, 156, 18, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L964 | `background-color: rgba(46, 204, 113, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L968 | `background-color: rgba(155, 89, 182, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L972 | `background-color: rgba(231, 76, 60, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L976 | `background-color: rgba(52, 73, 94, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L980 | `background-color: rgba(26, 188, 156, 0.15);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1049 | `background: #ffffff;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1066 | `background: linear-gradient(45deg, #e67e22, #d35400);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1076 | `background-color: #ffffff;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1150 | `background-color: #f5f5f5;` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1157 | `background-color: rgba(243, 156, 18, 0.2);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1163 | `background-color: rgba(243, 156, 18, 0.1);` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/index.vue` | L1205 | `background: linear-gradient(to right, #f39c12, #e74c3c);` |

</details>

---

ç°åœ¨æˆ‘çœ‹åˆ°äº†é—®é¢˜çš„æ¨¡å¼ã€‚æ‰€æœ‰é¡µé¢çš„èƒŒæ™¯éƒ½æ˜¯`#f5f5f5`ï¼ˆç°è‰²èƒŒæ™¯ï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚ä½†æ‚¨æåˆ°æœ‰è“è‰²èƒŒæ™¯é—®é¢˜ï¼Œè®©æˆ‘æ£€æŸ¥é¡µé¢ä¸­æ˜¯å¦æœ‰è“è‰²èƒŒæ™¯çš„é—®é¢˜ã€‚è®©æˆ‘æŸ¥çœ‹gitå†å²ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰è“è‰²èƒŒæ™¯çš„å·®å¼‚ï¼š

---

```bash
git diff HEAD~1 src/pages.json
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ 

```

---

```bash
git diff 730a4fd HEAD --name-only | grep -E "\.vue$|\.scss$|\.css$|pages\.json$"
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ 

```

---

```bash
git diff 730a4fd HEAD --name-only
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git diff 730a4fd HEAD --name-only
manifest.config.ts
src/manifest.json
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$
```

---

çœ‹èµ·æ¥æœ€æ–°ç‰ˆæœ¬ä¸730a4fdç‰ˆæœ¬åªæœ‰manifestç›¸å…³çš„å·®å¼‚ã€‚è®©æˆ‘æ£€æŸ¥è¿™äº›å·®å¼‚ï¼š

---

```bash
git diff 730a4fd HEAD manifest.config.ts
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git diff 730a4fd HEAD manifest.conf
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git diff 730a4fd HEAD manifest.conf
ig.ts
diff --git a/manifest.config.ts b/manifest.config.ts
index 10fecda..fc40ddd 100644
--- a/manifest.config.ts
+++ b/manifest.config.ts
@@ -17,8 +17,8 @@ export default defineManifestConfig({
   name: VITE_APP_TITLE,
   appid: VITE_UNI_APPID,
   description: '',
-  versionName: '1.0.4',
-  versionCode: '104',
+  versionName: '1.0.6',
+  versionCode: '106',
   transformPx: false,
   locale: VITE_FALLBACK_LOCALE, // 'zh-Hans'
   h5: {
@@ -67,7 +67,7 @@ export default defineManifestConfig({
           '<uses-feature android:name="android.hardware.camera"/>',
           '<uses-permission android:name="android.permission.WRITE_SETTINGS"/>',
         ],
-        schemes : ""
+        schemes: '',
       },
       /* iosæ‰“åŒ…é…ç½® */
       ios: {},
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$
```

---

```bash
git diff 730a4fd HEAD src/manifest.json
```

```
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git diff 730a4fd HEAD src/manifest.
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$ git diff 730a4fd HEAD src/manifest.
json
diff --git a/src/manifest.json b/src/manifest.json
index f5526d6..a6285f2 100644
--- a/src/manifest.json
+++ b/src/manifest.json
@@ -2,8 +2,8 @@
   "name": "ä¸­é“¶æ˜“æ·",
   "appid": "__UNI__D27C9EC",
   "description": "",
-  "versionName": "1.0.4",
-  "versionCode": "104",
+  "versionName": "1.0.6",
+  "versionCode": "106",
   "transformPx": false,
   "app-plus": {
     "usingComponents": true,
xchenxiao@XiaoXinPro:~/Development/trade_main/unibest_base$
```

---





---



---



---

