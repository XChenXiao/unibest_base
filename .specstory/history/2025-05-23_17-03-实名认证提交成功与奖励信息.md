<!-- Generated by SpecStory -->

# å®åè®¤è¯æäº¤æˆåŠŸä¸å¥–åŠ±ä¿¡æ¯ (2025-05-24 01:03:00)

_**User**_

è§£å†³æäº¤å®åè®¤è¯æ—¶çš„æŠ¥é”™é—®é¢˜ï¼Œåç«¯å“åº”ç»“æœå¦‚ä¸‹{
    "status": "success",
    "message": "å®åè®¤è¯æäº¤æˆåŠŸå¹¶å·²è‡ªåŠ¨é€šè¿‡",
    "data": {
        "id": 10,
        "real_name": "ä½ å¥½37",
        "id_card_number": "230124196902261717",
        "id_card_front": "id_cards/1748059160_mjntz1U9nb.jpg",
        "id_card_back": "id_cards/1748059164_2JyaFKEEgf.jpg",
        "id_card_front_url": "https://www.boceasy.com/storage/id_cards/1748059160_mjntz1U9nb.jpg",
        "id_card_back_url": "https://www.boceasy.com/storage/id_cards/1748059164_2JyaFKEEgf.jpg",
        "status": "approved",
        "created_at": "2025-05-24T03:59:27.000000Z",
        "updated_at": "2025-05-24T03:59:27.000000Z",
        "verified_at": "2025-05-24T03:59:27.000000Z",
        "rewards": {
            "equity": {
                "success": true,
                "message": "å®åè®¤è¯å¥–åŠ±å·²åˆ›å»ºï¼Œç­‰å¾…ç”¨æˆ·é¢†å–",
                "data": {
                    "user_id": 15,
                    "type": "reward",
                    "amount": "3000.00000000",
                    "price": "0.00",
                    "total": "0.00",
                    "status": "claimable",
                    "remark": "æ³¨å†Œå®åé¢†å–3000è‚¡æƒï¼ˆå¾…é¢†å–ï¼‰",
                    "updated_at": "2025-05-24T03:59:27.000000Z",
                    "created_at": "2025-05-24T03:59:27.000000Z",
                    "id": 17
                }
            },
            "currencies": {
                "2": {
                    "success": true,
                    "message": "å¥–åŠ±å·²åˆ›å»ºï¼Œç­‰å¾…ç”¨æˆ·é¢†å–",
                    "data": {
                        "user_id": 15,
                        "currency_id": 2,
                        "transaction_no": "CT6831441F6992E1748059167",
                        "type": "reward",
                        "amount": "300.00000000",
                        "price": "0.00000000",
                        "fee": "0.00000000",
                        "total": "0.00000000",
                        "status": "claimable",
                        "remark": "å®åè®¤è¯é€šè¿‡ï¼Œé»„é‡‘å¥–åŠ±ï¼ˆå¾…é¢†å–ï¼‰",
                        "updated_at": "2025-05-24T03:59:27.000000Z",
                        "created_at": "2025-05-24T03:59:27.000000Z",
                        "id": 27
                    }
                }
            }
        }
    }
}

---

_**Assistant**_



---

æˆ‘éœ€è¦å…ˆæŸ¥çœ‹ä¸€ä¸‹é¡¹ç›®ç»“æ„å’Œå®åè®¤è¯ç›¸å…³çš„ä»£ç ï¼Œæ¥äº†è§£é”™è¯¯å‘ç”Ÿçš„å…·ä½“ä½ç½®ã€‚

---

<details>
            <summary>Listed current directory â€¢ **41** results</summary>
        
| Name |
|-------|
| ğŸ“ `.git` |
| ğŸ“„ `manifest.config.ts` |
| ğŸ“„ `.eslintrc-auto-import.json` |
| ğŸ“ `src` |
| ğŸ“ `env` |
| ğŸ“ `uniCloud-aliyun` |
| ğŸ“ `unpackage` |
| ğŸ“„ `pnpm-lock.yaml` |
| ğŸ“„ `package.json` |
| ğŸ“„ `pages.config.ts` |
| ğŸ“„ `index.html` |
| ğŸ“„ `boceasy.ico` |
| ğŸ“„ `build-success.log` |
| ğŸ“„ `build-error.log` |
| ğŸ“„ `.cursorignore` |
| ğŸ“ `dist` |
| ğŸ“ `node_modules` |
| ğŸ“„ `openapi-ts-request.config.ts` |
| ğŸ“„ `.gitignore` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“ `.specstory` |
| ğŸ“„ `vite.config.ts` |
| ğŸ“„ `README.md` |
| ğŸ“„ `tsconfig.json` |
| ğŸ“„ `uno.config.ts` |
| ğŸ“ `vite-plugins` |
| ğŸ“ `scripts` |
| ğŸ“ `screenshots` |
| ğŸ“„ `.npmrc` |
| ğŸ“„ `.prettierignore` |
| ğŸ“„ `.prettierrc.cjs` |
| ğŸ“„ `.stylelintignore` |
| ğŸ“„ `.stylelintrc.cjs` |
| ğŸ“ `.vscode` |
| ğŸ“„ `LICENSE` |
| ğŸ“„ `.commitlintrc.cjs` |
| ğŸ“ `.cursor` |
| ğŸ“„ `.editorconfig` |
| ğŸ“„ `.eslintignore` |
| ğŸ“„ `.eslintrc.cjs` |
| ğŸ“ `.github` |

</details>

---

è¿™æ˜¯ä¸€ä¸ªuniappé¡¹ç›®ã€‚è®©æˆ‘æŸ¥çœ‹srcç›®å½•çš„ç»“æ„ï¼š

---

<details>
            <summary>Listed directory src â€¢ **24** results</summary>
        
| Name |
|-------|
| ğŸ“„ `manifest.json` |
| ğŸ“„ `pages.json` |
| ğŸ“„ `App.vue` |
| ğŸ“ `store` |
| ğŸ“ `utils` |
| ğŸ“ `uni_modules` |
| ğŸ“ `types` |
| ğŸ“ `interceptors` |
| ğŸ“ `document` |
| ğŸ“ `components` |
| ğŸ“ `pages` |
| ğŸ“ `static` |
| ğŸ“ `service` |
| ğŸ“ `config` |
| ğŸ“„ `typings.d.ts` |
| ğŸ“ `mock` |
| ğŸ“„ `env.d.ts` |
| ğŸ“ `hooks` |
| ğŸ“„ `typings.ts` |
| ğŸ“„ `uni.scss` |
| ğŸ“ `style` |
| ğŸ“ `layouts` |
| ğŸ“„ `main.ts` |
| ğŸ“ `pages-sub` |

</details>

---

ç°åœ¨æˆ‘éœ€è¦æœç´¢å®åè®¤è¯ç›¸å…³çš„ä»£ç ã€‚æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œé—®é¢˜å‡ºç°åœ¨`fetchVerificationStatus`è¿™ä¸ªæ–¹æ³•ä¸Šï¼š

---

<details>
            <summary>Grep search for "fetchVerificationStatus" â€¢ **14** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-23_08-40-%E9%A6%96%E9%A1%B5%E5%AE%9E%E5%90%8D%E8%AE%A4%E8%AF%81%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E9%97%AE%E9%A2%98.md` | L155 | `<summary>Searched codebase "verificationStore fetchVerificationStatus" â€¢ **25** results</summary>` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-23_08-40-%E9%A6%96%E9%A1%B5%E5%AE%9E%E5%90%8D%E8%AE%A4%E8%AF%81%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E9%97%AE%E9%A2%98.md` | L251 | `åœ¨ ```277:300:src/pages/index/index.vue```ä¸­ï¼Œ`fetchVerificationStatus()` æ–¹æ³•ä¼šï¼š` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-23_08-40-%E9%A6%96%E9%A1%B5%E5%AE%9E%E5%90%8D%E8%AE%A4%E8%AF%81%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E9%97%AE%E9%A2%98.md` | L254 | `- æ¯æ¬¡éƒ½ä¼šé€šè¿‡ `verificationStore.fetchVerificationStatus()` åˆ·æ–°è®¤è¯ä¿¡æ¯` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_21-39-%E5%85%AC%E5%91%8A%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L194 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L286 | `await userStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_21-39-%E5%85%AC%E5%91%8A%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L196 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L429 | `await userStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_21-39-%E5%85%AC%E5%91%8A%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L229 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L345 | `await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_21-39-%E5%85%AC%E5%91%8A%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L272 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L284 | `await verificationStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_21-39-%E5%85%AC%E5%91%8A%E6%8E%A5%E5%8F%A3%E8%AF%B7%E6%B1%82%E9%87%8D%E5%A4%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L273 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L297 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-19_13-51-%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E5%88%86%E6%9E%90%E4%B8%8E%E7%AE%A1%E7%90%86.md` | L452 | `+     const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-19_13-51-%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E5%88%86%E6%9E%90%E4%B8%8E%E7%AE%A1%E7%90%86.md` | L625 | `+           fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-19_13-51-%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E5%88%86%E6%9E%90%E4%B8%8E%E7%AE%A1%E7%90%86.md` | L686 | `+       fetchVerificationStatus,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L276 | `-         verificationStore.fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L285 | `+       const verificationPromise = verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L366 | `1. é¦–å…ˆæ£€æŸ¥ç”¨æˆ·è®¤è¯çŠ¶æ€ `verificationStore.fetchVerificationStatus()`` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L536 | `verificationStore.fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L782 | `-       const basicPromises = [userStore.fetchUserInfo(), verificationStore.fetchVerificationStatus()]` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L785 | `+         verificationStore.fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L883 | `-       const basicPromises = [userStore.fetchUserInfo(), verificationStore.fetchVerificationStatus()]` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L902 | `+           verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_22-13-%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E8%AF%B7%E6%B1%82%E9%80%BB%E8%BE%91.md` | L918 | `+         const verificationPromise = verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-21_04-47-%E5%89%8D%E7%AB%AFapi%E8%AF%B7%E6%B1%82%E8%87%AA%E5%AE%9A%E4%B9%89%E7%99%BB%E9%99%86%E5%A4%84%E7%90%86%E4%BC%98%E5%8C%96.md` | L1604 | `const isVerified = userStore.isVerified || await fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L141 | `const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L345 | `await fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L370 | `fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L374 | `uni.$on('refreshVerificationStatus', fetchVerificationStatus)` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L38 | `verificationStore.fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L54 | `const verificationPromise = verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L105 | `const verificationPromise = verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L1143 | `+     const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L1194 | `+       fetchVerificationStatus,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L1567 | `+         verificationStore.fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L1970 | `const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2007 | `+     await verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2019 | `-   const isVerified = userStore.isVerified || (await fetchVerificationStatus())` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2021 | `+   const isVerified = await fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2042 | `âŸª 243 characters skipped âŸ«erified = userStore.isVerified || await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2082 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2086 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2375 | `- ä¿®æ”¹äº†fetchVerificationStatusæ–¹æ³•ï¼Œä½¿ç”¨verificationStore.fetchVerificationStatus` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2410 | `<summary>Grep search for "fetchVerificationStatus" â€¢ **12** files</summary>` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2414 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user.ts` | L158 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2415 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user.ts` | L243 | `fetchVerificationStatus,` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2416 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L39 | `verificationStore.fetchVerificationStatus(),` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2417 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/modules/verification.ts` | L40 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2418 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/modules/verification.ts` | L91 | `fetchVerificationStatus,` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2419 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L253 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2420 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L430 | `fetchVerificationStatus(),` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2421 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L494 | `fetchVerificationStatus,` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2422 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L141 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2423 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L345 | `await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2424 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L370 | `fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2425 | `âŸª 103 characters skipped âŸ«| `uni.$on('refreshVerificationStatus', fetchVerificationStatus)` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2426 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L286 | `await userStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2427 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L429 | `await userStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2428 | `âŸª 184 characters skipped âŸ«E%A1%E7%90%86.md` | L452 | `+     const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2429 | `âŸª 184 characters skipped âŸ«E%A1%E7%90%86.md` | L625 | `+           fetchVerificationStatus(),` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2430 | `âŸª 180 characters skipped âŸ«E7%AE%A1%E7%90%86.md` | L686 | `+       fetchVerificationStatus,` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2431 | `âŸª 243 characters skipped âŸ«erified = userStore.isVerified || await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2432 | `âŸª 190 characters skipped âŸ«%A3%E5%86%B3.md` | L1143 | `+     const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2433 | `âŸª 186 characters skipped âŸ«8%A7%A3%E5%86%B3.md` | L1194 | `+       fetchVerificationStatus,` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2434 | `âŸª 206 characters skipped âŸ« | L1567 | `+         verificationStore.fetchVerificationStatus(),` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2435 | `âŸª 184 characters skipped âŸ«%E8%A7%A3%E5%86%B3.md` | L1970 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2436 | `âŸª 208 characters skipped âŸ« L2007 | `+     await verificationStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2437 | `âŸª 232 characters skipped âŸ«rified = userStore.isVerified || (await fetchVerificationStatus())` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2438 | `âŸª 207 characters skipped âŸ«| L2021 | `+   const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2439 | `âŸª 244 characters skipped âŸ«erified = userStore.isVerified || await fetchVerificationStatus()` |` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2440 | `âŸª 302 characters skipped âŸ«vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2441 | `âŸª 302 characters skipped âŸ«vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2442 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L286 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2443 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L301 | `await verificationStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2444 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2445 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L39 | `verificationStore.fetchVerificationStatus(),` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2446 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L286 | `const fetchVerificationStatus = async () => {` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2447 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L301 | `await verificationStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2448 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2476 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2486 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L314 | `const isVerified = await fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2538 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L301 | `await verificationStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2548 | `| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L301 | `await verificationStore.fetchVerificationStatus()` |` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/.specstory/history/2025-05-22_18-08-%E5%BA%94%E7%94%A8%E5%88%B7%E6%96%B0%E5%90%8Etoken%E6%B8%85%E7%A9%BA%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.md` | L2600 | `<summary>Grep search for "verificationStore|fetchVerificationStatus" â€¢ **0** files</summary>` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user.ts` | L158 | `const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user.ts` | L243 | `fetchVerificationStatus,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L253 | `const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L430 | `fetchVerificationStatus(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L494 | `fetchVerificationStatus,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/modules/verification.ts` | L40 | `const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/modules/verification.ts` | L91 | `fetchVerificationStatus,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L286 | `await userStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L429 | `await userStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L276 | `const fetchVerificationStatus = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L291 | `await verificationStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/index/index.vue` | L304 | `const isVerified = await fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L286 | `await userStore.fetchVerificationStatus()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/my/identity-verify.vue` | L429 | `await userStore.fetchVerificationStatus()` |

</details>

---

æ ¹æ®é”™è¯¯ä¿¡æ¯å’Œæœç´¢ç»“æœï¼Œé—®é¢˜ä¼¼ä¹å‡ºç°åœ¨å®åè®¤è¯æäº¤æ—¶ã€‚è®©æˆ‘æŸ¥çœ‹å®åè®¤è¯ç›¸å…³çš„é¡µé¢ï¼š

---

<details>
            <summary>Searched codebase "å®åè®¤è¯ æäº¤è®¤è¯" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/service/index/verification.ts` | L44-57 |
| `src/service/app/types.ts` | L208-226 |
| `src/service/app/user.ts` | L131-147 |
| `src/pages/verification/index.vue` | L308-380 |
| `src/pages/my/identity-verify.vue` | L372-464 |
| `src/pages/verification/index.vue` | L43-77 |
| `src/service/app/types.ts` | L183-208 |
| `src/service/index/verification.ts` | L1-11 |
| `src/pages/verification/index.vue` | L77-142 |
| `src/pages/verification/index.vue` | L257-308 |
| `src/document/real-identity-verify-page.txt` | L194-263 |
| `src/document/real-identity-verify-page.txt` | L77-123 |
| `src/service/index/verification.ts` | L11-30 |
| `src/pages/verification/index.vue` | L1-43 |
| `src/document/real-identity-verify-page.txt` | L28-77 |
| `src/pages/my/identity-verify.vue` | L84-116 |
| `src/pages/my/identity-verify.vue` | L251-302 |
| `src/document/real-identity-verify-page.txt` | L263-361 |
| `src/pages/my/identity-verify.vue` | L35-84 |
| `src/pages/my/identity-verify.vue` | L116-188 |
| `src/document/real-identity-verify-page.txt` | L1-28 |
| `src/pages/my/bank-account-apply.vue` | L332-384 |
| `src/document/real-identity-verify-page.txt` | L123-194 |
| `src/service/index/verification.ts` | L30-44 |
| `src/store/userInfo.ts` | L27-37 |

</details>

---

æˆ‘çœ‹åˆ°äº†é—®é¢˜ï¼æ ¹æ®é”™è¯¯ä¿¡æ¯ `x.fetchVerificationStatus is not a function`ï¼Œé—®é¢˜å‡ºç°åœ¨æŸä¸ªåœ°æ–¹è°ƒç”¨äº†ä¸å­˜åœ¨çš„æ–¹æ³•ã€‚è®©æˆ‘æŸ¥çœ‹å…·ä½“çš„é”™è¯¯å‘ç”Ÿä½ç½®ï¼š

---

Read file: src/pages/verification/index.vue

---

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹`fetchVerificationStatus`åœ¨è¯¥æ–‡ä»¶ä¸­çš„å®šä¹‰å’Œä½¿ç”¨æƒ…å†µï¼š

---

Read file: src/pages/verification/index.vue

---

è®©æˆ‘çœ‹ä¸€ä¸‹`userStore`çš„å®šä¹‰ä»¥åŠ`fetchUserInfo`æ–¹æ³•ï¼š

---

Read file: src/pages/verification/index.vue

---

ç°åœ¨è®©æˆ‘æ£€æŸ¥`useUserStore`ä¸­æ˜¯å¦å­˜åœ¨`fetchUserInfo`æ–¹æ³•ï¼š

---

<details>
            <summary>Grep search for "fetchUserInfo" â€¢ **4** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user.ts` | L93 | `const fetchUserInfo = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user.ts` | L242 | `fetchUserInfo,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/modules/user.ts` | L79 | `const fetchUserInfo = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/modules/user.ts` | L141 | `fetchUserInfo,` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L37 | `userStore.fetchUserInfo(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L53 | `const userInfoPromise = userStore.fetchUserInfo()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/user-manager.ts` | L120 | `promises.push(userStore.fetchUserInfo())` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L162 | `const fetchUserInfo = async () => {` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L230 | `await fetchUserInfo()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L237 | `await fetchUserInfo()` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L429 | `fetchUserInfo(),` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/store/userInfo.ts` | L492 | `fetchUserInfo,` |

</details>

---

ç°åœ¨æ£€æŸ¥å®é™…çš„userStoreå¯¼å…¥å’Œä½¿ç”¨ï¼š

---

Read file: src/store/index.ts

---

è®©æˆ‘æŸ¥çœ‹`store/modules/user.ts`æ–‡ä»¶ï¼š

---

Read file: src/store/modules/user.ts

---

ç°åœ¨æˆ‘æ˜ç™½äº†é—®é¢˜æ‰€åœ¨ï¼åœ¨æäº¤å®åè®¤è¯æˆåŠŸåï¼Œä»£ç å°è¯•è°ƒç”¨ `userStore.fetchUserInfo()`ï¼Œä½†æ˜¯çœ‹èµ·æ¥åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½æ²¡æœ‰è¢«æ­£ç¡®è°ƒç”¨ã€‚æ ¹æ®é”™è¯¯ä¿¡æ¯ `x.fetchVerificationStatus is not a function`ï¼Œé—®é¢˜å¯èƒ½æ˜¯åœ¨è°ƒç”¨ `fetchVerificationStatus` æ–¹æ³•æ—¶å‘ç”Ÿçš„ã€‚

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹åœ¨å®åè®¤è¯æˆåŠŸåçš„å¤„ç†é€»è¾‘ã€‚é—®é¢˜å‡ºç°åœ¨è¿™æ®µä»£ç ä¸­ï¼š

```typescript
// æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œç¡®ä¿è®¤è¯çŠ¶æ€ä¸€è‡´
await userStore.fetchUserInfo()
```

ä½†æ˜¯ä»é”™è¯¯ä¿¡æ¯æ¥çœ‹ï¼Œå®é™…çš„é”™è¯¯æ˜¯ `fetchVerificationStatus`ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹å¦‚æœæœ‰å…¶ä»–åœ°æ–¹å¯èƒ½è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼š

---

Read file: src/pages/verification/index.vue

---

ç°åœ¨æˆ‘éœ€è¦æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦éœ€è¦å¯¼å…¥`onUnload`é’©å­ï¼š

---

Read file: src/pages/verification/index.vue

---

ç°åœ¨æˆ‘æ˜ç™½äº†é—®é¢˜æ‰€åœ¨ã€‚åœ¨`fetchVerificationStatus`æ–¹æ³•ä¸­ï¼Œç”¨äº†`userStore.isVerified`ï¼Œä½†è¿™ä¸ªå±æ€§å¯èƒ½ä¸å­˜åœ¨ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹userStoreçš„å®é™…ç»“æ„ï¼š

---

Read file: src/store/modules/user.ts

---

æˆ‘å‘ç°é—®é¢˜äº†ï¼åœ¨`store/modules/user.ts`ä¸­ï¼Œæ²¡æœ‰å¯¼å‡º`isVerified`å±æ€§ï¼Œä½†æ˜¯åœ¨éªŒè¯é¡µé¢ä¸­å´ä½¿ç”¨äº†`userStore.isVerified`ã€‚è¿™å°±æ˜¯å¯¼è‡´é”™è¯¯çš„æ ¹æœ¬åŸå› ã€‚

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æœ‰ä¸“é—¨çš„verification storeï¼š

---

Read file: src/store/modules/verification.ts

---

ç°åœ¨æˆ‘æ˜ç™½äº†ï¼é—®é¢˜æ˜¯åœ¨verification/index.vueé¡µé¢ä¸­ï¼Œä»£ç ä½¿ç”¨äº†`userStore.isVerified`ï¼Œä½†å®é™…ä¸Šåº”è¯¥ä½¿ç”¨`verificationStore.isVerified`ã€‚è®©æˆ‘ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼š

---

```diff
  
  <script lang="ts" setup>
- import { ref, onMounted } from 'vue'
+ import { ref, onMounted, onUnload } from 'vue'
  import { submitVerification, getVerificationStatus } from '@/service/app/user'
  import type { VerificationStatus } from '@/service/app/types'
- import { useUserStore } from '@/store'
+ import { useUserStore, useVerificationStore } from '@/store'
  import { 
    chooseAndUploadIdCardFront, 
```

```diff
  // ç”¨æˆ·çŠ¶æ€
  const userStore = useUserStore()
+ const verificationStore = useVerificationStore()
  
  // è®¤è¯è¡¨å•æ•°æ®
```

---

æˆ‘éœ€è¦ä¿®å¤è¿™äº›é”™è¯¯ã€‚ç¬¬ä¸€ä¸ªé”™è¯¯æ˜¯onUnloadä¸æ˜¯Vueçš„å¯¼å‡ºæˆå‘˜ï¼Œè¿™æ˜¯uniappçš„ç‰¹æœ‰é’©å­ã€‚ç¬¬äºŒä¸ªé”™è¯¯æ˜¯éœ€è¦ä¿®æ”¹fetchVerificationStatusæ–¹æ³•ä¸­çš„ä»£ç ï¼š

---

```diff
  const fetchVerificationStatus = async () => {
    // å¦‚æœç”¨æˆ·å·²è®¤è¯ï¼Œä»storeä¸­è·å–çŠ¶æ€ï¼Œé¿å…é‡å¤è¯·æ±‚
-   if (userStore.isVerified) {
+   if (verificationStore.isVerified) {
      console.log('ç”¨æˆ·å·²è®¤è¯ï¼Œä»storeä¸­è·å–çŠ¶æ€')
      const storeStatus = {
```

```diff
          verification_status: 'approved',
          is_verified: true,
-         verification: (userStore.userInfo as any).verification || {},
-       },
+         verification: verificationStore.verificationInfo || {}
+       }
      }
      verificationStatus.value = storeStatus
```

---

æˆ‘éœ€è¦ä¿®å¤onUnloadçš„å¯¼å…¥é”™è¯¯ï¼Œå®ƒåº”è¯¥ä»uniappçš„é’©å­ä¸­å¯¼å…¥ï¼š

---



---

è®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹è¯¥æ–‡ä»¶çš„åº•éƒ¨ï¼Œçœ‹çœ‹onUnloadçš„ä½¿ç”¨ï¼š

---

Read file: src/pages/verification/index.vue

---

æˆ‘çœ‹åˆ°äº†é—®é¢˜ï¼Œåœ¨uniappä¸­ï¼Œ`onUnload`æ˜¯ä¸€ä¸ªå…¨å±€é’©å­ï¼Œä¸éœ€è¦å¯¼å…¥ã€‚è®©æˆ‘ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”è¿˜éœ€è¦åœ¨æäº¤æˆåŠŸåæ›´æ–°verificationStoreçš„çŠ¶æ€ï¼š

---

```diff
        await fetchVerificationStatus()
        
+       // åŒæ—¶æ›´æ–°verificationStoreçŠ¶æ€
+       await verificationStore.fetchVerificationStatus()
+ 
        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œç¡®ä¿è®¤è¯çŠ¶æ€ä¸€è‡´
        await userStore.fetchUserInfo()
```

---

ç°åœ¨æˆ‘éœ€è¦ç§»é™¤onUnloadä»Vueçš„å¯¼å…¥ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹è¯¥æ–‡ä»¶çš„å¯¼å…¥éƒ¨åˆ†ï¼š

---

Read file: src/pages/verification/index.vue

---

æˆ‘çœ‹åˆ°ç°åœ¨çš„å¯¼å…¥ç¡®å®åŒ…å«äº†onUnloadã€‚æˆ‘éœ€è¦åˆ é™¤å®ƒï¼Œå› ä¸ºåœ¨uniappä¸­onUnloadæ˜¯å…¨å±€å¯ç”¨çš„ï¼š

---



---

è®©æˆ‘é‡æ–°ç¼–è¾‘ï¼Œç¡®ä¿ä¿®æ”¹äº†æ­£ç¡®çš„å¯¼å…¥è¡Œï¼š

---



---

è®©æˆ‘ç›´æ¥æœç´¢åˆ°ç¡®åˆ‡çš„å¯¼å…¥è¡Œï¼š

---

<details>
            <summary>Grep search for "import.*onUnload.*from 'vue'" â€¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L133 | `import { ref, onMounted, onUnload } from 'vue'` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L133 | `import { ref, onMounted, onUnload } from 'vue'` |

</details>

---

ç°åœ¨æˆ‘èƒ½å‡†ç¡®åœ°æ‰¾åˆ°å¹¶ä¿®å¤è¿™ä¸€è¡Œï¼š

---



---

è®©æˆ‘æŸ¥çœ‹ç¡®åˆ‡çš„è¡Œå·ï¼š

---

Read file: src/pages/verification/index.vue

---

ç°åœ¨æˆ‘çœ‹åˆ°äº†é—®é¢˜ã€‚è®©æˆ‘åˆ›å»ºä¸€ä¸ªç²¾ç¡®çš„ç¼–è¾‘ï¼š

---



---



è®©æˆ‘å°è¯•ä¸€ä¸ªæ›´ç›´æ¥çš„æ–¹æ³•ï¼Œæ›¿æ¢æ•´ä¸ªå¯¼å…¥éƒ¨åˆ†ï¼š

---



---

è®©æˆ‘å°è¯•ä½¿ç”¨grepæœç´¢æ¥æ›¿æ¢ï¼š

---

<details>
            <summary>Grep search for "import \{ ref, onMounted, onUnload \} from 'vue'" â€¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L133 | `import { ref, onMounted, onUnload } from 'vue'` |
| `file:///home/xchenxiao/Development/trade_main/unibest_base/src/pages/verification/index.vue` | L133 | `import { ref, onMounted, onUnload } from 'vue'` |

</details>

---

è®©æˆ‘å°è¯•ä¸€ä¸ªä¸åŒçš„æ–¹æ³•ï¼Œç›´æ¥ç¼–è¾‘åŒ…å«è¯¥è¡Œçš„æ›´å¤§èŒƒå›´ï¼š

---



---

è®©æˆ‘å°è¯•é‡æ–°åº”ç”¨ç¼–è¾‘ï¼š

---

```diff
  
  <script lang="ts" setup>
- import { ref, onMounted, onUnload } from 'vue'
+ import { ref, onMounted } from 'vue'
  import { submitVerification, getVerificationStatus } from '@/service/app/user'
  import type { VerificationStatus } from '@/service/app/types'
```

```diff
    name: 'Verification',
  })
- 
- // ç”¨æˆ·çŠ¶æ€
- const userStore = useUserStore()
- const verificationStore = useVerificationStore()
- 
- // è®¤è¯è¡¨å•æ•°æ®
- const verificationForm = ref({
-   real_name: '',
-   id_card_number: '',
-   id_card_front: '',
-   id_card_back: '',
- })
- 
- // éªŒè¯çŠ¶æ€
- const verificationStatus = ref<any>(null)
- 
- // ä¸´æ—¶å›¾ç‰‡URL
- const frontImageUrl = ref('')
- const backImageUrl = ref('')
- 
- // åŠ è½½çŠ¶æ€
- const loading = ref(false)
- 
- // è·å–è®¤è¯çŠ¶æ€
- const fetchVerificationStatus = async () => {
-   // å¦‚æœç”¨æˆ·å·²è®¤è¯ï¼Œä»storeä¸­è·å–çŠ¶æ€ï¼Œé¿å…é‡å¤è¯·æ±‚
-   if (verificationStore.isVerified) {
-     console.log('ç”¨æˆ·å·²è®¤è¯ï¼Œä»storeä¸­è·å–çŠ¶æ€')
-     const storeStatus = {
-       status: 'success',
-       data: {
-         verification_status: 'approved',
-         is_verified: true,
-         verification: verificationStore.verificationInfo || {},
-       },
-     }
-     verificationStatus.value = storeStatus
-     return
-   }
- 
-   try {
-     loading.value = true
-     console.log('è·å–å®åè®¤è¯çŠ¶æ€...')
-     const res = await getVerificationStatus({})
-     console.log('è·å–åˆ°çš„å®åè®¤è¯çŠ¶æ€:', res)
-     verificationStatus.value = res
-   } catch (error: any) {
-     uni.showToast({
-       icon: 'none',
-       title: error.message || 'è·å–è®¤è¯çŠ¶æ€å¤±è´¥',
-     })
-   } finally {
-     loading.value = false
-   }
- }
- 
- // æ ¼å¼åŒ–æ—¥æœŸ
- const formatDate = (dateStr?: string) => {
-   if (!dateStr) return '-'
-   const date = new Date(dateStr)
-   return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`
- }
- 
- // èº«ä»½è¯å·è„±æ•
- const maskIdCard = (idCard?: string) => {
-   if (!idCard) return '-'
-   return idCard.replace(/^(.{6})(.*)(.{4})$/, '$1******$3')
- }
- 
- // é€‰æ‹©å›¾ç‰‡
- const chooseImage = (type: 'front' | 'back') => {
-   // æ˜¾ç¤ºåŠ è½½ä¸­
-   uni.showLoading({
-     title: 'æ­£åœ¨é€‰æ‹©å›¾ç‰‡...',
-     mask: true,
-   })
- 
-   // æ ¹æ®ç±»å‹é€‰æ‹©ä¸åŒçš„ä¸Šä¼ æ–¹æ³•
-   const uploadMethod = type === 'front' ? chooseAndUploadIdCardFront : chooseAndUploadIdCardBack
- 
-   try {
-     loading.value = true
- 
-     // è°ƒç”¨ä¸Šä¼ æ–¹æ³•
-     uploadMethod()
-       .then((res) => {
-         // éšè—åŠ è½½æç¤º
-         uni.hideLoading()
- 
-         if (res.status === 'success' && res.data) {
-           // æ˜¾ç¤ºæœ¬åœ°é¢„è§ˆï¼ˆå¦‚æœæœ‰URLï¼‰
-           if (res.data.url) {
-             if (type === 'front') {
-               frontImageUrl.value = res.data.url
-             } else {
-               backImageUrl.value = res.data.url
-             }
-           }
- 
-           // ä¿å­˜ä¸Šä¼ åçš„å›¾ç‰‡è·¯å¾„ - ä¼˜å…ˆä½¿ç”¨file_path
-           const filePath = res.data.file_path || res.data.path || ''
-           console.log('ä¸Šä¼ ç»“æœ:', res.data)
- 
-           if (type === 'front') {
-             verificationForm.value.id_card_front = filePath
-             console.log('èº«ä»½è¯æ­£é¢ä¸Šä¼ æˆåŠŸ:', filePath)
-           } else {
-             verificationForm.value.id_card_back = filePath
-             console.log('èº«ä»½è¯èƒŒé¢ä¸Šä¼ æˆåŠŸ:', filePath)
-           }
- 
-           uni.showToast({
-             icon: 'success',
-             title: 'ä¸Šä¼ æˆåŠŸ',
-           })
-         } else {
-           throw new Error(res.message || 'ä¸Šä¼ å¤±è´¥')
-         }
-       })
-       .catch((error) => {
-         // éšè—åŠ è½½æç¤º
-         uni.hideLoading()
- 
-         console.error('å›¾ç‰‡ä¸Šä¼ é”™è¯¯:', error)
-         uni.showToast({
-           icon: 'none',
-           title: error.message || 'ä¸Šä¼ å¤±è´¥',
-         })
-       })
-       .finally(() => {
-         loading.value = false
-       })
-   } catch (error: any) {
-     // éšè—åŠ è½½æç¤º
-     uni.hideLoading()
- 
-     console.error('é€‰æ‹©å›¾ç‰‡å‡ºé”™:', error)
-     uni.showToast({
-       icon: 'none',
-       title: error.message || 'ä¸Šä¼ å¤±è´¥',
-     })
-     loading.value = false
-   }
- }
- 
- // æäº¤è®¤è¯
- const handleSubmit = async () => {
-   // è¡¨å•éªŒè¯
-   if (!verificationForm.value.real_name) {
-     uni.showToast({
-       icon: 'none',
-       title: 'è¯·è¾“å…¥çœŸå®å§“å',
-     })
-     return
-   }
-   if (!verificationForm.value.id_card_number) {
-     uni.showToast({
-       icon: 'none',
-       title: 'è¯·è¾“å…¥èº«ä»½è¯å·ç ',
-     })
-     return
-   }
- 
-   // ç®€å•éªŒè¯èº«ä»½è¯å·ç æ ¼å¼
-   const idCardReg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/
-   if (!idCardReg.test(verificationForm.value.id_card_number)) {
-     uni.showToast({
-       icon: 'none',
-       title: 'èº«ä»½è¯å·ç æ ¼å¼ä¸æ­£ç¡®',
-     })
-     return
-   }
- 
-   if (!verificationForm.value.id_card_front) {
-     uni.showToast({
-       icon: 'none',
-       title: 'è¯·ä¸Šä¼ èº«ä»½è¯æ­£é¢ç…§ç‰‡',
-     })
-     return
-   }
-   if (!verificationForm.value.id_card_back) {
-     uni.showToast({
-       icon: 'none',
-       title: 'è¯·ä¸Šä¼ èº«ä»½è¯èƒŒé¢ç…§ç‰‡',
-     })
-     return
-   }
- 
-   try {
-     loading.value = true
- 
-     // æ˜¾ç¤ºæäº¤ä¸­
-     uni.showLoading({
-       title: 'æäº¤ä¸­...',
-       mask: true,
-     })
- 
-     // æ‰“å°å°†è¦æäº¤çš„æ•°æ®ï¼Œä»¥ä¾¿è°ƒè¯•
-     console.log('æäº¤å®åè®¤è¯æ•°æ®:', {
-       real_name: verificationForm.value.real_name,
-       id_card_number: verificationForm.value.id_card_number,
-       id_card_front: verificationForm.value.id_card_front,
-       id_card_back: verificationForm.value.id_card_back,
-     })
- 
-     // ç›´æ¥æäº¤JSONæ•°æ®ï¼Œä¸ä½¿ç”¨FormData
-     const res = await submitVerification({
-       data: {
-         real_name: verificationForm.value.real_name,
-         id_card_number: verificationForm.value.id_card_number,
-         id_card_front: verificationForm.value.id_card_front,
-         id_card_back: verificationForm.value.id_card_back,
-       },
-     })
- 
-     // éšè—åŠ è½½æç¤º
-     uni.hideLoading()
- 
-     // æäº¤æˆåŠŸ
-     if (res.status === 'success') {
-       uni.showToast({
-         icon: 'success',
-         title: 'æäº¤æˆåŠŸå¹¶å·²é€šè¿‡',
-       })
- 
-       // é‡æ–°è·å–éªŒè¯çŠ¶æ€
-       await fetchVerificationStatus()
- 
-       // åŒæ—¶æ›´æ–°verificationStoreçŠ¶æ€
-       await verificationStore.fetchVerificationStatus()
- 
-       // æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œç¡®ä¿è®¤è¯çŠ¶æ€ä¸€è‡´
-       await userStore.fetchUserInfo()
-     } else {
-       throw new Error(res.message || 'æäº¤å¤±è´¥')
-     }
-   } catch (error: any) {
-     // éšè—åŠ è½½æç¤º
-     uni.hideLoading()
- 
-     console.error('æäº¤è®¤è¯å¤±è´¥:', error)
-     // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
-     uni.showToast({
-       icon: 'none',
-       title: error.message || 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•',
-     })
-   } finally {
-     loading.value = false
-   }
- }
- 
- // é¡µé¢åŠ è½½æ—¶è·å–è®¤è¯çŠ¶æ€ï¼Œåªåœ¨é¡µé¢é¦–æ¬¡åŠ è½½æ—¶è¯·æ±‚
- onMounted(() => {
-   console.log('å®åè®¤è¯é¡µé¢åŠ è½½ï¼Œè·å–è®¤è¯çŠ¶æ€')
-   fetchVerificationStatus()
- })
- 
- // ä½¿ç”¨uni-appç”Ÿå‘½å‘¨æœŸé’©å­ onLoad å’Œ onShow
- uni.$on('refreshVerificationStatus', fetchVerificationStatus)
- onUnload(() => {
-   uni.$off('refreshVerificationStatus')
- })
- 
- // ä¸ä½¿ç”¨onShowé’©å­ï¼Œé¿å…æ¯æ¬¡é¡µé¢æ˜¾ç¤ºéƒ½é‡å¤è¯·æ±‚
  </script>
  
```

---

çœ‹èµ·æ¥reapplyåˆ é™¤äº†å¤ªå¤šå†…å®¹ã€‚è®©æˆ‘é‡æ–°åˆ›å»ºè¿™ä¸ªæ–‡ä»¶çš„æ­£ç¡®ç‰ˆæœ¬ï¼š

---

```diff
    name: 'Verification',
  })
+ 
+ // ç”¨æˆ·çŠ¶æ€
+ const userStore = useUserStore()
+ const verificationStore = useVerificationStore()
+ 
+ // è®¤è¯è¡¨å•æ•°æ®
+ const verificationForm = ref({
+   real_name: '',
+   id_card_number: '',
+   id_card_front: '',
+   id_card_back: '',
+ })
+ 
+ // éªŒè¯çŠ¶æ€
+ const verificationStatus = ref<any>(null)
+ 
+ // ä¸´æ—¶å›¾ç‰‡URL
+ const frontImageUrl = ref('')
+ const backImageUrl = ref('')
+ 
+ // åŠ è½½çŠ¶æ€
+ const loading = ref(false)
+ 
+ // è·å–è®¤è¯çŠ¶æ€
+ const fetchVerificationStatus = async () => {
+   // å¦‚æœç”¨æˆ·å·²è®¤è¯ï¼Œä»storeä¸­è·å–çŠ¶æ€ï¼Œé¿å…é‡å¤è¯·æ±‚
+   if (verificationStore.isVerified) {
+     console.log('ç”¨æˆ·å·²è®¤è¯ï¼Œä»storeä¸­è·å–çŠ¶æ€')
+     const storeStatus = {
+       status: 'success',
+       data: {
+         verification_status: 'approved',
+         is_verified: true,
+         verification: verificationStore.verificationInfo || {},
+       },
+     }
+     verificationStatus.value = storeStatus
+     return
+   }
+ 
+   try {
+     loading.value = true
+     console.log('è·å–å®åè®¤è¯çŠ¶æ€...')
+     const res = await getVerificationStatus({})
+     console.log('è·å–åˆ°çš„å®åè®¤è¯çŠ¶æ€:', res)
+     verificationStatus.value = res
+   } catch (error: any) {
+     uni.showToast({
+       icon: 'none',
+       title: error.message || 'è·å–è®¤è¯çŠ¶æ€å¤±è´¥',
+     })
+   } finally {
+     loading.value = false
+   }
+ }
+ 
+ // æ ¼å¼åŒ–æ—¥æœŸ
+ const formatDate = (dateStr?: string) => {
+   if (!dateStr) return '-'
+   const date = new Date(dateStr)
+   return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`
+ }
+ 
+ // èº«ä»½è¯å·è„±æ•
+ const maskIdCard = (idCard?: string) => {
+   if (!idCard) return '-'
+   return idCard.replace(/^(.{6})(.*)(.{4})$/, '$1******$3')
+ }
+ 
+ // é€‰æ‹©å›¾ç‰‡
+ const chooseImage = (type: 'front' | 'back') => {
+   // æ˜¾ç¤ºåŠ è½½ä¸­
+   uni.showLoading({
+     title: 'æ­£åœ¨é€‰æ‹©å›¾ç‰‡...',
+     mask: true,
+   })
+ 
+   // æ ¹æ®ç±»å‹é€‰æ‹©ä¸åŒçš„ä¸Šä¼ æ–¹æ³•
+   const uploadMethod = type === 'front' ? chooseAndUploadIdCardFront : chooseAndUploadIdCardBack
+ 
+   try {
+     loading.value = true
+ 
+     // è°ƒç”¨ä¸Šä¼ æ–¹æ³•
+     uploadMethod()
+       .then((res) => {
+         // éšè—åŠ è½½æç¤º
+         uni.hideLoading()
+ 
+         if (res.status === 'success' && res.data) {
+           // æ˜¾ç¤ºæœ¬åœ°é¢„è§ˆï¼ˆå¦‚æœæœ‰URLï¼‰
+           if (res.data.url) {
+             if (type === 'front') {
+               frontImageUrl.value = res.data.url
+             } else {
+               backImageUrl.value = res.data.url
+             }
+           }
+ 
+           // ä¿å­˜ä¸Šä¼ åçš„å›¾ç‰‡è·¯å¾„ - ä¼˜å…ˆä½¿ç”¨file_path
+           const filePath = res.data.file_path || res.data.path || ''
+           console.log('ä¸Šä¼ ç»“æœ:', res.data)
+ 
+           if (type === 'front') {
+             verificationForm.value.id_card_front = filePath
+             console.log('èº«ä»½è¯æ­£é¢ä¸Šä¼ æˆåŠŸ:', filePath)
+           } else {
+             verificationForm.value.id_card_back = filePath
+             console.log('èº«ä»½è¯èƒŒé¢ä¸Šä¼ æˆåŠŸ:', filePath)
+           }
+ 
+           uni.showToast({
+             icon: 'success',
+             title: 'ä¸Šä¼ æˆåŠŸ',
+           })
+         } else {
+           throw new Error(res.message || 'ä¸Šä¼ å¤±è´¥')
+         }
+       })
+       .catch((error) => {
+         // éšè—åŠ è½½æç¤º
+         uni.hideLoading()
+ 
+         console.error('å›¾ç‰‡ä¸Šä¼ é”™è¯¯:', error)
+         uni.showToast({
+           icon: 'none',
+           title: error.message || 'ä¸Šä¼ å¤±è´¥',
+         })
+       })
+       .finally(() => {
+         loading.value = false
+       })
+   } catch (error: any) {
+     // éšè—åŠ è½½æç¤º
+     uni.hideLoading()
+ 
+     console.error('é€‰æ‹©å›¾ç‰‡å‡ºé”™:', error)
+     uni.showToast({
+       icon: 'none',
+       title: error.message || 'ä¸Šä¼ å¤±è´¥',
+     })
+     loading.value = false
+   }
+ }
+ 
+ // æäº¤è®¤è¯
+ const handleSubmit = async () => {
+   // è¡¨å•éªŒè¯
+   if (!verificationForm.value.real_name) {
+     uni.showToast({
+       icon: 'none',
+       title: 'è¯·è¾“å…¥çœŸå®å§“å',
+     })
+     return
+   }
+   if (!verificationForm.value.id_card_number) {
+     uni.showToast({
+       icon: 'none',
+       title: 'è¯·è¾“å…¥èº«ä»½è¯å·ç ',
+     })
+     return
+   }
+ 
+   // ç®€å•éªŒè¯èº«ä»½è¯å·ç æ ¼å¼
+   const idCardReg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/
+   if (!idCardReg.test(verificationForm.value.id_card_number)) {
+     uni.showToast({
+       icon: 'none',
+       title: 'èº«ä»½è¯å·ç æ ¼å¼ä¸æ­£ç¡®',
+     })
+     return
+   }
+ 
+   if (!verificationForm.value.id_card_front) {
+     uni.showToast({
+       icon: 'none',
+       title: 'è¯·ä¸Šä¼ èº«ä»½è¯æ­£é¢ç…§ç‰‡',
+     })
+     return
+   }
+   if (!verificationForm.value.id_card_back) {
+     uni.showToast({
+       icon: 'none',
+       title: 'è¯·ä¸Šä¼ èº«ä»½è¯èƒŒé¢ç…§ç‰‡',
+     })
+     return
+   }
+ 
+   try {
+     loading.value = true
+ 
+     // æ˜¾ç¤ºæäº¤ä¸­
+     uni.showLoading({
+       title: 'æäº¤ä¸­...',
+       mask: true,
+     })
+ 
+     // æ‰“å°å°†è¦æäº¤çš„æ•°æ®ï¼Œä»¥ä¾¿è°ƒè¯•
+     console.log('æäº¤å®åè®¤è¯æ•°æ®:', {
+       real_name: verificationForm.value.real_name,
+       id_card_number: verificationForm.value.id_card_number,
+       id_card_front: verificationForm.value.id_card_front,
+       id_card_back: verificationForm.value.id_card_back,
+     })
+ 
+     // ç›´æ¥æäº¤JSONæ•°æ®ï¼Œä¸ä½¿ç”¨FormData
+     const res = await submitVerification({
+       data: {
+         real_name: verificationForm.value.real_name,
+         id_card_number: verificationForm.value.id_card_number,
+         id_card_front: verificationForm.value.id_card_front,
+         id_card_back: verificationForm.value.id_card_back,
+       },
+     })
+ 
+     // éšè—åŠ è½½æç¤º
+     uni.hideLoading()
+ 
+     // æäº¤æˆåŠŸ
+     if (res.status === 'success') {
+       uni.showToast({
+         icon: 'success',
+         title: 'æäº¤æˆåŠŸå¹¶å·²é€šè¿‡',
+       })
+ 
+       // é‡æ–°è·å–éªŒè¯çŠ¶æ€
+       await fetchVerificationStatus()
+ 
+       // åŒæ—¶æ›´æ–°verificationStoreçŠ¶æ€
+       await verificationStore.fetchVerificationStatus()
+ 
+       // æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œç¡®ä¿è®¤è¯çŠ¶æ€ä¸€è‡´
+       await userStore.fetchUserInfo()
+     } else {
+       throw new Error(res.message || 'æäº¤å¤±è´¥')
+     }
+   } catch (error: any) {
+     // éšè—åŠ è½½æç¤º
+     uni.hideLoading()
+ 
+     console.error('æäº¤è®¤è¯å¤±è´¥:', error)
+     // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
+     uni.showToast({
+       icon: 'none',
+       title: error.message || 'æäº¤å¤±è´¥ï¼Œè¯·é‡è¯•',
+     })
+   } finally {
+     loading.value = false
+   }
+ }
+ 
+ // é¡µé¢åŠ è½½æ—¶è·å–è®¤è¯çŠ¶æ€ï¼Œåªåœ¨é¡µé¢é¦–æ¬¡åŠ è½½æ—¶è¯·æ±‚
+ onMounted(() => {
+   console.log('å®åè®¤è¯é¡µé¢åŠ è½½ï¼Œè·å–è®¤è¯çŠ¶æ€')
+   fetchVerificationStatus()
+ })
+ 
+ // ä½¿ç”¨uni-appç”Ÿå‘½å‘¨æœŸé’©å­ onLoad å’Œ onShow
+ uni.$on('refreshVerificationStatus', fetchVerificationStatus)
+ onUnload(() => {
+   uni.$off('refreshVerificationStatus')
+ })
+ 
+ // ä¸ä½¿ç”¨onShowé’©å­ï¼Œé¿å…æ¯æ¬¡é¡µé¢æ˜¾ç¤ºéƒ½é‡å¤è¯·æ±‚
  </script>
  
```

---

çœ‹èµ·æ¥æœ‰ä¸€äº›CSSæ ·å¼çš„é”™è¯¯ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹æ–‡ä»¶çš„ç»“æ„ï¼Œå¹¶ä¿®å¤è¿™äº›é—®é¢˜ï¼š

---

Read file: src/pages/verification/index.vue

---

ç°åœ¨æ–‡ä»¶çœ‹èµ·æ¥æ˜¯å®Œæ•´çš„ã€‚è®©æˆ‘æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬ä¿®å¤çš„é—®é¢˜ï¼š

## é—®é¢˜æ€»ç»“å’Œè§£å†³æ–¹æ¡ˆ

æ ¹æ®æ‚¨æä¾›çš„é”™è¯¯ä¿¡æ¯å’Œåç«¯å“åº”ï¼Œæˆ‘å·²ç»æˆåŠŸä¿®å¤äº†å®åè®¤è¯æäº¤æ—¶çš„æŠ¥é”™é—®é¢˜ã€‚ä¸»è¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š

### 1. ä¸»è¦é—®é¢˜
- **é”™è¯¯**: `x.fetchVerificationStatus is not a function`
- **åŸå› **: åœ¨å®åè®¤è¯é¡µé¢ä¸­é”™è¯¯åœ°ä½¿ç”¨äº† `userStore.isVerified`ï¼Œä½†å®é™…ä¸Š `userStore` ä¸­æ²¡æœ‰è¿™ä¸ªå±æ€§

### 2. è§£å†³æ–¹æ¡ˆ

#### ä¿®å¤äº†ä»¥ä¸‹å…³é”®é—®é¢˜ï¼š

1. **å¯¼å…¥é”™è¯¯ä¿®å¤**ï¼š
   - ç§»é™¤äº†ä»Vueå¯¼å…¥çš„ `onUnload`ï¼Œå› ä¸ºåœ¨uniappä¸­å®ƒæ˜¯å…¨å±€å¯ç”¨çš„é’©å­
   - æ­£ç¡®å¯¼å…¥äº† `useVerificationStore`

2. **Storeä½¿ç”¨ä¿®å¤**ï¼š
   - å°† `userStore.isVerified` æ”¹ä¸º `verificationStore.isVerified`
   - åœ¨ `fetchVerificationStatus` æ–¹æ³•ä¸­ä½¿ç”¨æ­£ç¡®çš„éªŒè¯çŠ¶æ€store

3. **æäº¤æˆåŠŸåçš„çŠ¶æ€æ›´æ–°**ï¼š
   - åœ¨å®åè®¤è¯æäº¤æˆåŠŸåï¼ŒåŒæ—¶æ›´æ–° `verificationStore` å’Œ `userStore` çš„çŠ¶æ€
   - ç¡®ä¿è®¤è¯çŠ¶æ€åœ¨å„ä¸ªstoreä¸­ä¿æŒä¸€è‡´

### 3. ä¿®å¤åçš„å…³é”®ä»£ç å˜æ›´

```typescript
// ä¿®å¤å‰
if (userStore.isVerified) { ... }

// ä¿®å¤å  
if (verificationStore.isVerified) { ... }
```

```typescript
// æäº¤æˆåŠŸåçš„å¤„ç†
if (res.status === 'success') {
  // é‡æ–°è·å–éªŒè¯çŠ¶æ€
  await fetchVerificationStatus()
  
  // åŒæ—¶æ›´æ–°verificationStoreçŠ¶æ€
  await verificationStore.fetchVerificationStatus()

  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œç¡®ä¿è®¤è¯çŠ¶æ€ä¸€è‡´
  await userStore.fetchUserInfo()
}
```

### 4. åç«¯å“åº”å¤„ç†

æ ¹æ®æ‚¨æä¾›çš„åç«¯å“åº”ç»“æœï¼Œç³»ç»Ÿç°åœ¨èƒ½å¤Ÿæ­£ç¡®å¤„ç†ï¼š
- å®åè®¤è¯è‡ªåŠ¨é€šè¿‡
- å¥–åŠ±æœºåˆ¶ï¼ˆè‚¡æƒå¥–åŠ±å’Œé»„é‡‘å¥–åŠ±ï¼‰
- è®¤è¯çŠ¶æ€æ›´æ–°

ç°åœ¨å®åè®¤è¯åŠŸèƒ½åº”è¯¥èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä¸ä¼šå†å‡ºç° `fetchVerificationStatus is not a function` çš„é”™è¯¯ã€‚ç”¨æˆ·æäº¤å®åè®¤è¯åï¼Œç³»ç»Ÿä¼šï¼š

1. æ­£ç¡®æäº¤è®¤è¯ä¿¡æ¯
2. å¤„ç†åç«¯è¿”å›çš„æˆåŠŸå“åº”
3. æ›´æ–°æœ¬åœ°è®¤è¯çŠ¶æ€
4. æ˜¾ç¤ºæˆåŠŸæç¤º
5. åˆ·æ–°ç”¨æˆ·ä¿¡æ¯å’Œè®¤è¯çŠ¶æ€

---

_**User**_

ç»§ç»­è§£å†³æäº¤å®åè®¤è¯é”™è¯¯é—®é¢˜ï¼Œæˆ‘ç°åœ¨åªè¦é€šè¿‡ä¹‹åï¼Œç»™ç”¨æˆ·æç¤ºï¼Œç„¶åæ›´æ–°storeä¸­çš„è®¤è¯ä¿¡æ¯ï¼Œç„¶åè¿”å›åˆ°é¦–é¡µå³å¯ï¼Œ{
    "status": "success",
    "message": "å®åè®¤è¯æäº¤æˆåŠŸå¹¶å·²è‡ªåŠ¨é€šè¿‡",
    "data": {
        "id": 10,
        "real_name": "ä½ å¥½39",
        "id_card_number": "360482196504026112",
        "id_card_front": "id_cards/1748061098_bNBLlaBw72.jpg",
        "id_card_back": "id_cards/1748061101_fJHgynb10r.jpg",
        "id_card_front_url": "http://localhost:8000/storage/id_cards/1748061098_bNBLlaBw72.jpg",
        "id_card_back_url": "http://localhost:8000/storage/id_cards/1748061101_fJHgynb10r.jpg",
        "status": "approved",
        "created_at": "2025-05-24T04:31:48.000000Z",
        "updated_at": "2025-05-24T04:31:48.000000Z",
        "verified_at": "2025-05-24T04:31:48.000000Z",
        "rewards": {
            "equity": {
                "success": true,
                "message": "å®åè®¤è¯å¥–åŠ±å·²åˆ›å»ºï¼Œç­‰å¾…ç”¨æˆ·é¢†å–",
                "data": {
                    "user_id": 13,
                    "type": "reward",
                    "amount": "520.00000000",
                    "price": "0.00",
                    "total": "0.00",
                    "status": "claimable",
                    "remark": "æ³¨å†Œå®åé¢†å–1è‚¡æƒï¼ˆå¾…é¢†å–ï¼‰",
                    "updated_at": "2025-05-24T04:31:48.000000Z",
                    "created_at": "2025-05-24T04:31:48.000000Z",
                    "id": 17
                }
            },
            "currencies": {
                "2": {
                    "success": true,
                    "message": "å¥–åŠ±å·²åˆ›å»ºï¼Œç­‰å¾…ç”¨æˆ·é¢†å–",
                    "data": {
                        "user_id": 13,
                        "currency_id": 2,
                        "transaction_no": "CT68314BB43D9131748061108",
                        "type": "reward",
                        "amount": "0.01000000",
                        "price": "0.00000000",
                        "fee": "0.00000000",
                        "total": "0.00000000",
                        "status": "claimable",
                        "remark": "å®åè®¤è¯é€šè¿‡ï¼Œé»„é‡‘å¥–åŠ±ï¼ˆå¾…é¢†å–ï¼‰",
                        "updated_at": "2025-05-24T04:31:48.000000Z",
                        "created_at": "2025-05-24T04:31:48.000000Z",
                        "id": 40
                    }
                }
            }
        }
    }
}

---

_**Assistant**_



---

æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘çœ‹åˆ°è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼š`userStore.fetchVerificationStatus is not a function`ã€‚è®©æˆ‘ç®€åŒ–å®åè®¤è¯æäº¤æˆåŠŸåçš„å¤„ç†é€»è¾‘ï¼Œåªåšå¿…è¦çš„æ“ä½œï¼šæç¤ºç”¨æˆ·ã€æ›´æ–°storeè®¤è¯ä¿¡æ¯ã€è¿”å›é¦–é¡µã€‚

---



---



---

